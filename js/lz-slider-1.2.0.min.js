(function(d){d.extend({isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]";},isObject:function(f){return Object.prototype.toString.call(f)==="[object Object]";
}});var c=function(f){this.$ele=d(f);this.param=this.$ele.data("lzslider-param");this.status=this.$ele.data("lzslider-status");this.imgBox=this.$ele.data("lzslider-imgBox");
this.img=this.$ele.data("lzslider-img");};c.prototype.setEvent=function(){var f=this,g=this.param;if(d.isArray(g.event)){d.each(g.event,function(h,j){f[j]&&f[j]();
});}else{f[g.event]&&f[g.event]();}};c.prototype.wheel=function(){var g=this.$ele,f=this.status,h=this.param;g.off("mousewheel.lzslider DOMMouseScroll.lzslider").on("mousewheel.lzslider DOMMouseScroll.lzslider",function(j){if(f.flag&&f.mouseH){j.preventDefault();
var k=(j.originalEvent.wheelDelta&&(j.originalEvent.wheelDelta>0?1:-1))||(j.originalEvent.detail&&(j.originalEvent.detail>0?-1:1));if(k>0){f.cPoint-=h.num;
}if(k<0){f.cPoint+=h.num;}g.sliderExcute();}});};c.prototype.keyboard=function(){var g=this.$ele,f=this.status,h=this.param;d(window).on("keydown",function(j){if(f.flag&&f.mouseH){j.preventDefault();
if(j.keyCode==37||j.keyCode==38){f.cPoint-=h.num;}if(j.keyCode==39||j.keyCode==40){f.cPoint+=h.num;}g.sliderExcute();}});};c.prototype.btn=function(){var n=this.$ele,g=this.param,j=this.status,h=this.imgBox,k=this.img,l=j.imgLen,m=0,o=(g.dir=="left"||g.dir=="right")?j.imgW:j.imgH;
var f=d("<ul class='"+g.btnCls[0]+"'></ul>");n.append(f.get(0));pointInBox=d("<li class='"+g.btnCls[1]+"'></li>");f.append(pointInBox.get(0));point="<div class='"+g.btnCls[2]+"'></div>";
for(i=0;i<j.lastLen;pointInBox.append(point),i++){}m=f.find("div").eq(0).outerWidth(true)*l;pointInBox.css("width",m).find("div").eq(0).addClass(g.btnCls[3]);
f.find("div").off(".lzslider").on("click.lzslider",function(p){if(j.flag){if(j.cPoint!=d(this).index()){j.cPoint=d(this).index();n.sliderExcute();}}});
};c.prototype.arrow=function(){var h=this.$ele,k=this.param,g=this.status,j=g.imgLen;var f=d("<ul class='"+k.arrowCls[0]+"'></ul>");h.append(f.get(0));
if(k.arrowStyle){arrowP="<li class='"+k.arrowCls[1]+"'>&lt;</li><li class='"+k.arrowCls[2]+"'>&gt;</li>";}else{arrowP="<li class='"+k.arrowCls[1]+"'></li><li class='"+k.arrowCls[2]+"'></li>";
}f.append(arrowP);f.find("li").eq(0).off(".lzslider").on("click.lzslider",function(l){if(g.flag){g.cPoint-=k.num;h.sliderExcute();}});f.find("li").eq(1).off(".lzslider").on("click.lzslider",function(l){if(g.flag){g.cPoint+=k.num;
h.sliderExcute();}});};c.prototype.touch=function(){var j={},g={},h=this.$ele,l=this.param,f=this.status,k=f.imgLen;h.on("touchstart",function(n){n.preventDefault();
n.stopPropagation();var m=n.originalEvent.touches[0];j.x=Math.floor(m.clientX);j.y=Math.floor(m.clientY);timer=setTimeout(function(){j={};g={};},1000);
});h.on("touchmove",function(n){n.preventDefault();n.stopPropagation();var m=n.originalEvent.touches[0];g.x=Math.floor(m.clientX);g.y=Math.floor(m.clientY);
});h.on("touchend",function(n){n.preventDefault();n.stopPropagation();var m=l.dir;if((m==="left"||m==="right")&&f.flag&&j.x){(j.x-g.x<-30)&&(f.cPoint-=l.num);
(j.x-g.x>30)&&(f.cPoint+=l.num);h.sliderExcute();}else{if((m==="up"||m==="down")&&f.flag&&j.y){j.y-g.y<-30&&(f.cPoint-=l.num);j.y-g.y>30&&(f.cPoint+=l.num);
h.sliderExcute();}}j={};g={};});};var e=function(f){this.$ele=d(f);this.status=this.$ele.data("lzslider-status");this.param=this.$ele.data("lzslider-param");
this.imgBox=this.$ele.data("lzslider-imgBox");this.img=this.$ele.data("lzslider-img");};e.prototype.calBoxLen=function(){var l=this.$ele,m=this.param,f=this.status,j=this.img,h=0,g=0;
f.arrLen=[0];if(m.dir=="left"||m.dir=="right"){d.each(j,function(k,n){h+=d(n).outerWidth(true);f.arrLen.push(h);});}else{d.each(j,function(k,n){h+=d(n).outerHeight(true);
f.arrLen.push(h);});}f.boxLen=(m.dir=="left"||m.dir=="right")?parseFloat(l.css("width")):parseFloat(l.css("height"));while(f.arrLen[g++]<=h-f.boxLen){f.lastLen=g;
}return h;};e.prototype.autoPlay=function(){var g=this.$ele,f=this.status,h=this.param;if(f.flag){(h.dir=="left"||h.dir=="up")?(f.cPoint+=h.num):(f.cPoint-=h.num);
g.sliderExcute();}};e.prototype.indexChange=function(){var f=this.status,h=this.param,g=f.lastLen;(!h.cycle&&f.cPoint>g-1)&&(f.cPoint=g-1);(!h.cycle&&f.cPoint<0)&&(f.cPoint=0);
(h.cycle&&f.sPonit!=g-1&&f.cPoint>g-1)&&(f.cPoint=g-1);(h.cycle&&f.sPonit==g-1&&f.cPoint>g-1)&&(f.cPoint=0);(h.cycle&&f.sPonit!=0&&f.cPoint<0)&&(f.cPoint=0);
(h.cycle&&f.sPonit==0&&f.cPoint<0)&&(f.cPoint=g-1);};e.prototype.calMoveLen=function(){var f=this.status;return f.arrLen[f.cPoint];};e.prototype.excute=function(){var g=this.status,j=this.param,h=this.imgBox,f=this.calMoveLen(),k=this.$ele.find("."+j.btnCls[0]).find("div");
if(k){k.removeClass(j.btnCls[3]).eq(g.cPoint).addClass(j.btnCls[3]);}(j.dir=="left"||j.dir=="right")&&h.stop().animate({marginLeft:-f},j.speed);(j.dir=="up"||j.dir=="down")&&h.stop().animate({marginTop:-f},j.speed);
g.sPonit=g.cPoint;};e.prototype.onProgress=function(){var g=this,f=this.status,h=this.param;g.indexChange();g.excute();if(f.cPoint==f.lastLen-1&&h._onLast){h._onLast.call(this,h,f);
}h._onSwitch&&h._onSwitch.call(this,h,f);f.flag=false;setTimeout(function(){f.flag=true;},h.speed);};var b=function(j,g,f,k,h){this.$ele=d(j);this.$ele.data("lzslider-param",this.initParam(g,f,k,h));
this.$ele.data("lzslider-imgBox",this.$ele.children().first());this.$ele.data("lzslider-img",this.$ele.data("lzslider-imgBox").children());this.$ele.data("lzslider-status",{flag:true,mouseH:false,sPonit:0,cPoint:0,arrLen:[],boxLen:0,imgLen:this.$ele.data("lzslider-img").length,lastLen:0,timer:null});
};b.prototype.layout=function(){var h=this.$ele,f=h.data("lzslider-status"),j=h.data("lzslider-param"),g=h.data("lzslider-imgBox");len=h.get(0).sliderexcute.calBoxLen();
h.css("position")=="static"&&h.css("position","relative");(j.dir=="left"||j.dir=="right")?g.css("width",len):g.css("height",len);};b.prototype.initEvent=function(){var k=this.$ele,h=k.get(0),f=k.data("lzslider-status"),l=k.data("lzslider-param"),g=k.data("lzslider-imgBox"),j=new c(k);
d(window).resize(function(){var m=h.sliderexcute.calBoxLen();(l.dir=="left"||l.dir=="right")?g.css("width",m):g.css("height",m);});k.off(".lzslider");k.on("mouseenter.lzslider",function(){clearInterval(f.timer);
f.timer=null;f.mouseH=true;}).on("mouseleave.lzslider",function(){l.auto&&(f.timer=setInterval(h.sliderexcute.autoPlay.bind(h.sliderexcute),l.interval));
f.mouseH=false;});j.setEvent();l.auto&&(f.timer=setInterval(h.sliderexcute.autoPlay.bind(h.sliderexcute),l.interval));};b.prototype.initParam=function(g,f,k,j){var h={dir:"left",speed:600,interval:3000,event:["arrow"],auto:true,cycle:true,num:1,btnCls:["lz-sliderPoint-box","lz-sliderPoint","lz-sliderPoint-point","lz-sliderPoint-hover"],arrowCls:["lz-sliderBtn","lz-sliderBtn-left","lz-sliderBtn-right"],arrowStyle:true,_onSwitch:null,_onLast:null};
if(d.isObject(g)){h=d.extend({},h,g);}else{h.dir=g;h.interval=f;h.speed=k;h.auto=j;!isNaN(g)&&(h.interval=g,h.speed=f);typeof g==="function"&&(h._onSwitch=g);
typeof g==="boolean"&&(h.auto=g);}if(this.$ele.data("slider-param")){d.extend({},h,this.$ele.data("slider-param"));}h.dir=(h.dir=="left"||h.dir=="right"||h.dir=="up"||h.dir=="down")?h.dir:"left";
h.speed=(h.speed==null)?600:h.speed;h.interval=(h.interval==null)?3000:h.interval;h.interval=="fast"&&(h.interval=1500,h.speed=300);h.interval=="medium"&&(h.interval=3000,h.speed=600);
h.interval=="slow"&&(h.interval=6000,h.speed=1200);(isNaN(h.interval)||isNaN(h.speed))&&(h.interval=3000,h.speed=600);(h.interval<h.speed)&&jQuery.error("参数设置错误 动画间隔小于动画速度");
h.auto=(h.auto===false)?false:true;h.cycle=(h.cycle===false)?false:true;h.arrowStyle=(h.arrowStyle===false)?false:true;typeof h._onSwitch!=="function"&&(h._onSwitch=null);
typeof h._onLast!=="function"&&(h._onLast=null);return h;};var a=function(f){this.$ele=d(f);};a.prototype.destory=function(){var f=this.$ele;d.each(f,function(j,l){var h=d(l),g=h.data("lzslider-status"),k=h.data("lzslider-param");
if(g.timer){clearInterval(g.timer);}h.off("lzslider");if(btn=h.find(k.btnCls[0])){btn.remove();}if(arrow=h.find(k.arrowCls[0])){arrow.remove();}h.removeData("lzslider-status").removeData("lzslider-param");
});return false;};a.prototype.init=function(g,f,k,j){var h=this.$ele;this.destory();h.lzbanner(g,f,k,j);};a.prototype.index=function(g){var h=this.$ele,f=this;
if(g===undefined){return h.eq(0).data("lzslider-status").sPonit+1;}else{d.each(h,function(k,m){f.stop();var j=d(m).data("lzslider-status"),l=d(m).data("lzslider-param");
if(j.flag){j.cPoint=g-1;d(m).sliderExcute();}l.auto&&f.start();});return this;}};a.prototype.next=function(){var f=this,g=this.$ele;d.each(g,function(j,l){f.stop();
var h=d(l).data("lzslider-status"),k=d(l).data("lzslider-param");if(h.flag){h.cPoint+=k.num;d(l).sliderExcute();}k.auto&&f.start();});return this;};a.prototype.prev=function(){var f=this,g=this.$ele;
d.each(g,function(j,l){f.stop();var h=d(l).data("lzslider-status"),k=d(l).data("lzslider-param");if(h.flag){h.cPoint-=k.num;d(l).sliderExcute();}k.auto&&f.start();
});return this;};a.prototype.setInterval=function(g){var h=this.$ele,f=this;d.each(h,function(j,l){f.stop();var k=d(l).data("lzslider-param");g>k.speed&&(k.interval=~~g);
k.auto&&f.start();});return this;};a.prototype.setSpeed=function(f){var g=this.$ele;d.each(g,function(h,k){var j=d(k).data("lzslider-param");f<j.interval&&(j.speed=~~f);
});return this;};a.prototype.start=function(){var f=this.$ele;d.each(f,function(h,k){var g=d(k).data("lzslider-status"),j=d(k).data("lzslider-param");if(!g.timer){g.timer=setInterval(k.sliderexcute.autoPlay.bind(k.sliderexcute),j.interval);
}});return this;};a.prototype.stop=function(){var f=this.$ele;d.each(f,function(h,j){var g=d(j).data("lzslider-status");if(g.timer){clearInterval(g.timer);
g.timer=null;}});return this;};a.prototype.onCycle=function(){var f=this.$ele;d.each(f,function(g,h){d(h).data("lzslider-param").cycle=true;});return this;
};a.prototype.offCycle=function(){var f=this.$ele;d.each(f,function(g,h){d(h).data("lzslider-param").cycle=false;});return this;};a.prototype.on=function(h,f){var g=this.$ele;
if(typeof f==="function"){d.each(g,function(j,k){h==="switch"&&(d(k).data("lzslider-param")._onSwitch=f);h==="last"&&(d(k).data("lzslider-param")._onLast=f);
});}};d.fn.sliderExcute=function(){var f=d(this).get(0);f.sliderexcute.onProgress();};d.fn.sliderTool=function(){var f=d(this);return new a(f);};d.fn.lzslider=function(g,f,k,j){var h=d(this);
d.each(h,function(l,n){var m=new b(n,g,f,k,j);n.sliderexcute=new e(n);m.layout();m.initEvent();});return h.sliderTool();};})(jQuery);